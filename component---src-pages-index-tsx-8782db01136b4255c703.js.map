{"version":3,"file":"component---src-pages-index-tsx-8782db01136b4255c703.js","mappings":"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","sources":["webpack://gatsby-starter-default/./src/components/Main/PostItem.tsx","webpack://gatsby-starter-default/./src/hooks/useInfiniteScroll.tsx","webpack://gatsby-starter-default/./src/components/Main/PostList.tsx","webpack://gatsby-starter-default/./src/pages/index.tsx"],"sourcesContent":["import React, { FunctionComponent } from 'react'\nimport styled from '@emotion/styled'\nimport { Link } from 'gatsby'\nimport { GatsbyImage } from 'gatsby-plugin-image'\nimport { PostFrontmatterType } from 'types/PostItem.types'\n\ntype PostItemProps = PostFrontmatterType & { link: string }\n\n\nconst PostItemWrapper = styled(Link)`\n  display: grid;\n  grid-template-columns: 5fr 2fr;\n  border-radius: 5px;\n  box-shadow: 0 0 4px rgba(0, 0, 0, 0.05);\n  transition: 0.3s box-shadow;\n  cursor: pointer;\n\n  &:hover {\n    box-shadow: 0 3px 3px -5px rgba(0, 0, 0, 0.15);\n  }\n\n  @media (max-width: 768px) {\n    grid-template-columns: 5fr 3fr;\n  }\n\n`\nconst ThumbnailImage = styled(GatsbyImage)`\n  margin: 12px;\n  object-fit: fit;\n  border-radius: 5px;\n\n`\n\nconst PostItemContent = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 15px;\n`\nconst Title = styled.div`\n  display: -webkit-box;\n  overflow: hidden;\n  margin-bottom: 3px;\n  text-overflow: ellipsis;\n  white-space: normal;\n  overflow-wrap: break-word;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  font-size: 16px;\n  font-weight: 700;\n`\n\nconst Date = styled.div`\n  font-size: 12px;\n  font-weight: 400;\n  opacity: 0.7;\n`\n\nconst Category = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  margin-top: 10px;\n  margin: 10px -5px;\n`\n\nconst CategoryItem = styled.div`\n  margin: 2.5px 5px;\n  padding: 3px 5px;\n  border-radius: 3px;\n  font-size: 12px;\n  font-weight: 700;\n  opacity: 0.7;\n`\n\nconst Summary = styled.div`\n  display: -webkit-box;\n  overflow: hidden;\n  margin-top: 10px;\n  text-overflow: ellipsis;\n  white-space: normal;\n  overflow-wrap: break-word;\n  -webkit-line-clamp: 4;\n  -webkit-box-orient: vertical;\n  font-size: 13px;\n  font-weight: 400;\n  opacity: 0.7;\n`\n\nconst PostItem: FunctionComponent<PostItemProps> = function ({\n  title,\n  date,\n  categories,\n  summary,\n  thumbnail: {\n    childImageSharp: { gatsbyImageData },\n  },\n  link,\n}) {\n  return (\n    <PostItemWrapper to={link}>\n\n\n      <PostItemContent>\n        <Title>{title}</Title>\n        <Date>{date}</Date>\n        <Category>\n          {categories.map(item => (\n            <CategoryItem key={item}>#{item}</CategoryItem>\n          ))}\n        </Category>\n        <Summary>{summary}</Summary>\n      </PostItemContent>\n\n      <ThumbnailImage image={gatsbyImageData} alt=\"Post Item Image\" />\n    </PostItemWrapper>\n  )\n}\n\nexport default PostItem","import { MutableRefObject, useState, useEffect, useRef, useMemo } from 'react'\nimport { PostListItemType } from 'types/PostItem.types'\n\nexport type useInfiniteScrollType = {\n    containerRef: MutableRefObject<HTMLDivElement | null>\n    postList: PostListItemType[]\n}\n\nconst NUMBER_OF_ITEMS_PER_PAGE = 10\n\nconst useInfiniteScroll = function (\n    selectedCategory: string,\n    posts: PostListItemType[],\n): useInfiniteScrollType {\n    const containerRef: MutableRefObject<HTMLDivElement | null> =\n        useRef<HTMLDivElement>(null)\n    const observer: MutableRefObject<IntersectionObserver | null> =\n        useRef<IntersectionObserver>(null)\n    const [count, setCount] = useState<number>(1)\n\n    const postListByCategory = useMemo<PostListItemType[]>(\n        () =>\n            posts.filter(\n                ({\n                    node: {\n                        frontmatter: { categories },\n                    },\n                }: PostListItemType) =>\n                    selectedCategory !== 'All'\n                        ? categories.includes(selectedCategory)\n                        : true,\n            ),\n        [selectedCategory],\n    )\n\n    useEffect(() => {\n        observer.current = new IntersectionObserver((entries, observer) => {\n            if (!entries[0].isIntersecting) return\n\n            setCount(value => value + 1)\n            observer.unobserve(entries[0].target)\n        })\n    }, [])\n\n    useEffect(() => setCount(1), [selectedCategory])\n\n    useEffect(() => {\n        if (\n            NUMBER_OF_ITEMS_PER_PAGE * count >= postListByCategory.length ||\n            containerRef.current === null ||\n            containerRef.current.children.length === 0 ||\n            observer.current === null\n        )\n            return\n\n        observer.current.observe(\n            containerRef.current.children[containerRef.current.children.length - 1],\n        )\n    }, [count, selectedCategory])\n\n    return {\n        containerRef,\n        postList: postListByCategory.slice(0, count * NUMBER_OF_ITEMS_PER_PAGE),\n    }\n}\n\nexport default useInfiniteScroll","import React, { FunctionComponent } from 'react'\nimport styled from '@emotion/styled'\nimport PostItem from 'components/Main/PostItem'\nimport { PostListItemType } from 'types/PostItem.types'\nimport useInfiniteScroll, {\n    useInfiniteScrollType,\n} from 'hooks/useInfiniteScroll'\n\n\n// 기존에 정의했던 PostListItemType 삭제\n\ntype PostListProps = {\n    selectedCategory: string\n    posts: PostListItemType[]\n}\n\nexport type PostType = {\n    node: {\n        id: string\n        frontmatter: {\n            title: string\n            summary: string\n            date: string\n            categories: string[]\n            thumbnail: {\n                publicURL: string\n            }\n        }\n    }\n}\n\n\nconst PostListWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 3em;\n  margin: 0 auto;\n  padding: 50px 0 100px;\n\n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n    width: 100%;\n  }\n`\n\nconst PostList: FunctionComponent<PostListProps> = function ({\n    selectedCategory,\n    posts,\n}) {\n    const { containerRef, postList }: useInfiniteScrollType = useInfiniteScroll(\n        selectedCategory,\n        posts,\n    )\n\n    return (\n        <PostListWrapper ref={containerRef}>\n            {postList.map(\n                ({\n                    node: {\n                        id,\n                        fields: { slug },\n                        frontmatter,\n                    },\n                }: PostListItemType) => (\n                    <PostItem {...frontmatter} link={slug} key={id} />\n                ),\n            )}\n        </PostListWrapper>\n    )\n}\n\nexport default PostList","import React, { FunctionComponent, useMemo } from 'react'\nimport styled from '@emotion/styled'\nimport GlobalStyle from 'components/Common/GlobalStyle'\nimport Footer from 'components/Common/Footer'\nimport CategoryList from 'components/Main/CategoryList'\nimport Introduction from 'components/Main/Introduction'\nimport PostList, { PostType } from 'components/Main/PostList'\nimport { graphql } from 'gatsby'\nimport { PostListItemType } from 'types/PostItem.types'\nimport { IGatsbyImageData } from 'gatsby-plugin-image'\nimport queryString, { ParsedQuery } from 'query-string'\nimport Template from 'components/Common/Template'\n\nconst Main = styled.div`\n  grid-column-start: 7;\n  grid-column-end: 19;\n  padding: 0 80px;\n  max-width: 800px;\n  min-width: 650px;\n  overflow: scroll;\n\n  @media (max-width: 1200px) {\n    margin: 0 auto;\n    // padding: 0 80px;\n    overflow: visible;\n  }\n\n  @media (max-width: 768px) {\n    min-width: 100%;\n    padding: 0 8px;\n  }\n`\n\ntype IndexPageProps = {\n  location: {\n    search: string\n  }\n  data: {\n    site: {\n      siteMetadata: {\n        title: string\n        description: string\n        siteUrl: string\n      }\n    }\n    allMarkdownRemark: {\n      edges: PostListItemType[]\n    }\n    file: {\n      childImageSharp: {\n        gatsbyImageData: IGatsbyImageData\n      }\n      publicURL: string\n    }\n  }\n}\n\nconst IndexPage: FunctionComponent<IndexPageProps> = function ({\n  location: { search },\n  data: {\n    site: {\n      siteMetadata: { title, description, siteUrl },\n    },\n    allMarkdownRemark: { edges },\n    file: {\n      childImageSharp: { gatsbyImageData },\n      publicURL,\n    },\n  },\n}) {\n\n  const parsed: ParsedQuery<string> = queryString.parse(search)\n  const selectedCategory: string =\n    typeof parsed.category !== 'string' || !parsed.category\n      ? 'All'\n      : parsed.category\n\n  const categoryList = useMemo(\n    () =>\n      edges.reduce(\n        (\n          list: CategoryListProps['categoryList'],\n          {\n            node: {\n              frontmatter: { categories },\n            },\n          }: PostType,\n        ) => {\n          categories.forEach(category => {\n            if (list[category] === undefined) list[category] = 1;\n            else list[category]++;\n          });\n\n          list['All']++;\n\n          return list;\n        },\n        { All: 0 },\n      ),\n    [],\n  )\n\n  return (\n    <Template\n      title={title}\n      description={description}\n      url={siteUrl}\n      image={publicURL}\n    >\n      <Introduction profileImage={gatsbyImageData} />\n      <Main>\n        <CategoryList\n          selectedCategory={selectedCategory}\n          categoryList={categoryList}\n        />\n        <PostList selectedCategory={selectedCategory} posts={edges} />\n      </Main>\n\n    </Template>\n  )\n}\nexport default IndexPage\n\nexport const getPostList = graphql`\n  query getPostList {\n    site {\n      siteMetadata {\n        title\n        description\n        siteUrl\n      }\n    }\n    allMarkdownRemark(\n      sort: { order: DESC, fields: [frontmatter___date, frontmatter___title] }\n    ) {\n      edges {\n        node {\n          id\n          fields {\n            slug\n          }\n          frontmatter {\n            title\n            summary\n            date(formatString: \"YYYY.MM.DD.\")\n            categories\n            thumbnail {\n              childImageSharp {\n                gatsbyImageData(width: 768, height: 400)\n              }\n            }\n          }\n        }\n      }\n    }\n    file(name: { eq: \"profile-image\" }) {\n      childImageSharp {\n        gatsbyImageData(width: 120, height: 120)\n      }\n      publicURL\n    }\n  }\n`;"],"names":["PostItemWrapper","_styled","Link","process","ThumbnailImage","GatsbyImage","PostItemContent","Title","Date","Category","CategoryItem","Summary","title","date","categories","summary","gatsbyImageData","thumbnail","childImageSharp","link","___EmotionJSX","to","map","item","key","image","alt","selectedCategory","posts","containerRef","useRef","observer","useState","count","setCount","postListByCategory","useMemo","filter","node","frontmatter","includes","useEffect","current","IntersectionObserver","entries","isIntersecting","value","unobserve","target","length","children","observe","postList","slice","PostListWrapper","useInfiniteScroll","ref","id","slug","fields","PostItem","Main","name","styles","search","location","data","site","siteMetadata","description","siteUrl","edges","allMarkdownRemark","file","publicURL","parsed","queryString","category","categoryList","reduce","list","forEach","undefined","All","Template","url","Introduction","profileImage","CategoryList","PostList"],"sourceRoot":""}