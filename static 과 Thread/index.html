<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.21.1"/><meta data-react-helmet="true" name="description" content="static 을 통해서 얻을 수 있는 명확한 이점과, 그에 반해 발생하는 무수한 주의점을 타파해서 멋있어지자"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1.0"/><meta data-react-helmet="true" http-equiv="Content-Type" content="text/html;charset=UTF-8"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:title" content="static 을 통한 성능 고도화 및  multi thread 고려 등의 주의점"/><meta data-react-helmet="true" property="og:description" content="static 을 통해서 얻을 수 있는 명확한 이점과, 그에 반해 발생하는 무수한 주의점을 타파해서 멋있어지자"/><meta data-react-helmet="true" property="og:image" content="/static/93f5908ec7d2b74d10420c339bb310b8/static_thum.jpg"/><meta data-react-helmet="true" property="og:url"/><meta data-react-helmet="true" property="og:site_name" content="static 을 통한 성능 고도화 및  multi thread 고려 등의 주의점"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:title" content="static 을 통한 성능 고도화 및  multi thread 고려 등의 주의점"/><meta data-react-helmet="true" name="twitter:description" content="static 을 통해서 얻을 수 있는 명확한 이점과, 그에 반해 발생하는 무수한 주의점을 타파해서 멋있어지자"/><meta data-react-helmet="true" name="twitter:image" content="/static/93f5908ec7d2b74d10420c339bb310b8/static_thum.jpg"/><meta data-react-helmet="true" name="twitter:site" content="@사용자이름"/><meta data-react-helmet="true" name="twitter:creator" content="@사용자이름"/><meta data-react-helmet="true" name="google-site-verification" content="Kqjqe5wmyUS1xGrvn9c-6CHtk2bxO_6GjrtIkUhFAp4"/><style data-href="/styles.ab33764ee8026509192d.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{color:#ccc}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.inserted{color:green}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#000;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;-o-tab-size:4;tab-size:4;text-align:left;text-shadow:0 1px #fff;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#b3d4fc;text-shadow:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:hsla(0,0%,100%,.5);color:#9a6e3a}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><title data-react-helmet="true">static 을 통한 성능 고도화 및  multi thread 고려 등의 주의점</title><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="canonical" href="https://comtrial.github.io/static%20과%20Thread/" data-baseprotocol="https:" data-basehost="comtrial.github.io"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css 4f3yow">.css-4f3yow{display:grid;grid-template-columns:repeat(24, 1fr);width:100vw;height:100vh;}@media (max-width: 1200px){.css-4f3yow{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}@media (max-width: 768px){.css-4f3yow{width:100vw;height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}</style><div class="css-4f3yow e1strnqo0"><style data-emotion="css-global 1v3prin">*{padding:0;margin:0;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";letter-spacing:-.01em;color:#292b2c;}*::-webkit-scrollbar{display:none;}html,body,#___gatsby{height:100%;}a,a:hover{color:inherit;-webkit-text-decoration:none;text-decoration:none;cursor:pointer;}</style><style data-emotion="css x5y173">.css-x5y173{grid-column-end:span 6;padding:80px 0 0 80px;width:100%;display:block;font-size:14px;}@media (max-width: 1200px){.css-x5y173{grid-column-start:8;grid-column-end:18;padding:80px 80px;max-width:800px;min-width:650px;margin:0 auto;}}@media (max-width: 768px){.css-x5y173{width:100%;min-width:0;padding:14px 14px 14px 14px;}}</style><div class="css-x5y173 e160b014"><style data-emotion="css 1o6qhld">.css-1o6qhld{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;}@media (max-width: 768px){.css-1o6qhld{width:100%;}}</style><div class="css-1o6qhld e160b013"><style data-emotion="css yw2x09">.css-yw2x09{font-size:16px;font-weight:700;margin-bottom:15px;}@media (max-width: 768px){.css-yw2x09{font-size:16px;}}</style><div class="css-yw2x09 e160b011">Choi Seungwon</div><br/><div><style data-emotion="css z78eiy">.css-z78eiy{font-size:16px;font-weight:400;}@media (max-width: 768px){.css-z78eiy{font-size:13px;}}</style><div class="css-z78eiy e160b012">Nice to Meet You,</div><div class="css-yw2x09 e160b011">I&#x27;m Junior Software Engineer.</div></div><br/><style data-emotion="css 1fledxx">.css-1fledxx{font-size:14px;font-weight:400;margin-bottom:15px;}@media (max-width: 768px){.css-1fledxx{font-size:12px;}}</style><div class="css-1fledxx e160b010"><a href="mailto:comtrial97@gmail.com" target="_blank" rel="noreferrer"><u>Contact →</u></a><br/><a href="https://github.com/comtrial" target="_blank" rel="noreferrer"><u>Github →</u></a></div></div></div><style data-emotion="css 1u219so">.css-1u219so{grid-column-start:7;grid-column-end:19;margin:0 auto;min-width:500px;max-width:580px;width:100%;overflow:scroll;}@media (max-width: 1200px){.css-1u219so{margin:0 auto;padding:0 40px;overflow:visible;}}@media (max-width: 768px){.css-1u219so{min-width:100%;padding:0;}}</style><div class="css-1u219so e6b6ljm0"><style data-emotion="css 1udceki">.css-1udceki{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;padding:15px 0;margin-top:65px;position:-webkit-sticky;position:sticky;top:0;background-color:white;z-index:10;}@media (max-width: 1200px){.css-1udceki{width:100%;margin:0;padding:0 20px;}}</style><div class="css-1udceki e1kn8q5k1"><style data-emotion="css 1rchos1">.css-1rchos1{margin-right:20px;padding:5px 0;font-size:14px;font-weight:500;font-weight:650;-webkit-text-decoration:underline;text-decoration:underline;text-underline-offset:5px;cursor:pointer;}.css-1rchos1:last-of-type{margin-right:0;}@media (max-width: 768px){.css-1rchos1{font-size:12px;}}</style><a class="css-1rchos1 e1kn8q5k0" href="/?category=All">#All</a><style data-emotion="css 19kzyt2">.css-19kzyt2{margin-right:20px;padding:5px 0;font-size:14px;font-weight:500;font-weight:500;-webkit-text-decoration:none;text-decoration:none;text-underline-offset:5px;cursor:pointer;}.css-19kzyt2:last-of-type{margin-right:0;}@media (max-width: 768px){.css-19kzyt2{font-size:12px;}}</style><a class="css-19kzyt2 e1kn8q5k0" href="/?category=Java">#Java</a></div><style data-emotion="css 163yfv7">.css-163yfv7{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative;width:100%;box-sizing:border-box;overflow:hidden;}</style><div class="css-163yfv7 e1opi4mu2"><style data-emotion="css 1j4frpp">.css-1j4frpp{width:100%;padding:20px 0;object-fit:cover;overflow:hidden;}</style><div class="css-1j4frpp e1opi4mu1"><style data-emotion="css 1pkizp7">.css-1pkizp7{z-index:-1;border-radius:5px;-webkit-background-size:contain;background-size:contain;object-fit:contain;}</style><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained css-1pkizp7 e1opi4mu0"><div style="max-width:6000px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;4000&#x27; width=&#x27;6000&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear" decoding="async" src="data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAANABQDASIAAhEBAxEB/8QAGgAAAQUBAAAAAAAAAAAAAAAAAAMEBQYHCP/EABYBAQEBAAAAAAAAAAAAAAAAAAUDBP/aAAwDAQACEAMQAAAB4Jc4zRc9YcREzP/EABwQAAAHAQEAAAAAAAAAAAAAAAABAgMEBQYHEv/aAAgBAQABBQLEvZGrTtekTr4OqI1NVrCYM+WmQPQ//8QAHhEAAgICAgMAAAAAAAAAAAAAAQIREgADBBMhMVH/2gAIAQMBAT8Bft0cdFJXXdA6osl3U+LEgVUGPVrfQBhgmc//xAAeEQACAgICAwAAAAAAAAAAAAABAgMSABETISIxQf/aAAgBAgEBPwGPinnZlDSUYo7nSqjADxAJuxG/da/Qd4Ohn//EACkQAAICAQIEBAcAAAAAAAAAAAECAxESEyEABAUUFSIyMyMxQVFjceH/2gAIAQEABj8CXn+t+IPzcTlligXl2gIFaXuHPL1F72sKB8yR2kLyw9JjOEUEfwrgsgXja6jKDvRAb6GuLTKvyEFr/a4j+3w/UJ2l5hYpI17bPRV8tvNIgzq2B8mJ2rLfhNKHt41jjUJqNKdhXuMAxsoDRv7+vN34/8QAHBABAAIDAQEBAAAAAAAAAAAAAREhADFRgUHB/9oACAEBAAE/IZDF4XVQLxxZkKm/pJNMCUqxoZitJi11a4UEj5Ox5A6K4KLI7UKfeE4MD53lBGEKQcvE9Brnv7n/2gAMAwEAAgADAAAAEBwP/8QAGhEBAQEAAwEAAAAAAAAAAAAAAREhADFRQf/aAAgBAwEBPxDum5iSN5QtOSJalOtwQrHowM+evvP/xAAZEQEBAAMBAAAAAAAAAAAAAAABESExQfD/2gAIAQIBAT8QYg3WlsVCICVpoBAxgNlebe693//EABkQAQEBAQEBAAAAAAAAAAAAAAERIQAxUf/aAAgBAQABPxDCYuMPKeIhaflVshdEHBR6U4tm0g0TVsi9fsMOWm26saQ2z7QH3grRACd2Pl4n6srQFAW1UiVUsg/LV//Z" alt=""/><picture><source type="image/webp" data-srcset="/static/93f5908ec7d2b74d10420c339bb310b8/f77da/static_thum.webp 1500w,/static/93f5908ec7d2b74d10420c339bb310b8/cf4ae/static_thum.webp 3000w,/static/93f5908ec7d2b74d10420c339bb310b8/955c8/static_thum.webp 6000w" sizes="(min-width: 6000px) 6000px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 6000px) 6000px, 100vw" decoding="async" loading="lazy" data-src="/static/93f5908ec7d2b74d10420c339bb310b8/2a19d/static_thum.jpg" data-srcset="/static/93f5908ec7d2b74d10420c339bb310b8/6588d/static_thum.jpg 1500w,/static/93f5908ec7d2b74d10420c339bb310b8/88700/static_thum.jpg 3000w,/static/93f5908ec7d2b74d10420c339bb310b8/2a19d/static_thum.jpg 6000w" alt="thumbnail"/></picture><noscript><picture><source type="image/webp" srcSet="/static/93f5908ec7d2b74d10420c339bb310b8/f77da/static_thum.webp 1500w,/static/93f5908ec7d2b74d10420c339bb310b8/cf4ae/static_thum.webp 3000w,/static/93f5908ec7d2b74d10420c339bb310b8/955c8/static_thum.webp 6000w" sizes="(min-width: 6000px) 6000px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 6000px) 6000px, 100vw" decoding="async" loading="lazy" src="/static/93f5908ec7d2b74d10420c339bb310b8/2a19d/static_thum.jpg" srcSet="/static/93f5908ec7d2b74d10420c339bb310b8/6588d/static_thum.jpg 1500w,/static/93f5908ec7d2b74d10420c339bb310b8/88700/static_thum.jpg 3000w,/static/93f5908ec7d2b74d10420c339bb310b8/2a19d/static_thum.jpg 6000w" alt="thumbnail"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div><style data-emotion="css p5tuz0">.css-p5tuz0{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;height:200px;padding:60px 0;padding:0 20px;}@media (max-width: 768px){.css-p5tuz0{width:100%;padding:20px 20px;}}</style><div class="css-p5tuz0 e1st1jau2"><style data-emotion="css kbgudh">.css-kbgudh{display:-webkit-box;overflow:hidden;overflow-wrap:break-word;text-overflow:ellipsis;white-space:normal;-webkit-line-clamp:2;-webkit-box-orient:vertical;font-size:30px;font-weight:600;}@media (max-width: 768px){.css-kbgudh{font-size:24px;}}</style><div class="css-kbgudh e1st1jau1">static 을 통한 성능 고도화 및  multi thread 고려 등의 주의점</div><style data-emotion="css 1on72x2">.css-1on72x2{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:20px;font-size:14px;font-weight:500;}@media (max-width: 768px){.css-1on72x2{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;font-size:12px;font-weight:400;}}</style><div class="css-1on72x2 e1st1jau0"><div>Java</div><div>2023.08.05.</div></div></div></div><style data-emotion="css 1gvfp6l">.css-1gvfp6l{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;word-break:break-all;box-sizing:border-box;line-height:1.5;font-size:15px;font-weight:400;letter-spacing:-.01em;color:#343a40!important;}.css-1gvfp6l img{display:block;max-height:500px;width:auto;margin:0 auto;padding:0 20px;object-fit:cover;}.css-1gvfp6l span+em,.css-1gvfp6l img+em{display:block;text-align:center;font-size:12px;}.css-1gvfp6l p{padding:14px 0;color:#343a40!important;}.css-1gvfp6l strong{background:#333e;border-radius:2px;color:rgb(256, 256, 256)!important;font-weight:400;padding:2px;}.css-1gvfp6l h1,.css-1gvfp6l h2,.css-1gvfp6l h3,.css-1gvfp6l h4{font-weight:600;}.css-1gvfp6l *+h1,.css-1gvfp6l *+h2,.css-1gvfp6l *+h3,.css-1gvfp6l *+h3{margin-top:60px;}.css-1gvfp6l h1{font-size:20px;font-weight:700;}.css-1gvfp6l h2{font-size:18px;font-weight:700;}.css-1gvfp6l h3{font-size:16px;font-weight:700;}.css-1gvfp6l h4{font-size:15px;font-weight:700;}.css-1gvfp6l blockquote{margin:10px 0;padding:0px 15px;border-left:0.8px solid #000000;font-weight:500;}.css-1gvfp6l ol,.css-1gvfp6l ul{margin-left:20px;padding:20px 0;}.css-1gvfp6l hr{border:0.8px solid rgb(210, 210, 210);background:rgb(210, 210, 210);margin-bottom:30px;}.css-1gvfp6l a{color:#4263eb;-webkit-text-decoration:underline;text-decoration:underline;}.css-1gvfp6l pre[class*='language-']{margin:30px 0;padding:14px;font-weight:500;font-size:12px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace!important;background:rgba(240, 240, 240, 0.5);border-radius:4px;}.css-1gvfp6l pre[class*='language-']::-webkit-scrollbar-thumb{background:rgba(245, 255, 255, 0.5);border-radius:4px;}@media (max-width: 768px){.css-1gvfp6l{width:100%;padding:20px 20px;font-size:14px;}.css-1gvfp6l h1{font-size:20px;}.css-1gvfp6l h2{font-weight:700;font-size:18px;}.css-1gvfp6l h3{font-weight:600;font-size:16px;}.css-1gvfp6l h4{font-weight:600;font-size:14px;}.css-1gvfp6l img{width:auto;max-height:300px;padding:0 10vw;object-fit:cover;}.css-1gvfp6l hr{margin-bottom:30px;}}</style><div class="css-1gvfp6l e1ijh0y10"><h2>static ?</h2>
<hr>
<p>명확한 장점으로 인해 성능을 고도화를 위해 쉽게 고려되지만, 다양한 경로에서 야기될 수 있는 문제점으로 인해<br>
<em>모르면 쓰지 마라</em>
가 중론이 되는 개념 중 하나인 것 같다.</p>
<p>보다 그 이점과 주의점을 명확하게 하여, 적재적소에 사용하고자 정리해 보도록 하자<br>
(무서워서 안 쓸 수는 없다…)</p>
<h3>개념</h3>
<p><em>static : 정적인, 움직이지 않는</em></p>
<p>크게 와닿진 않되, 어떤 의미로 사용되었는지는 알 것 같은 단어이다.</p>
<p>클래스에서 static으로 선언한 변수는 찍어낸 객체에서 존재하는 변수가 아닌, 클래스 주소에 위치 한 클래스 변수이다.<br>
이 말인즉슨, 해당 클래스의 생성자로 찍어낸 모든 객체가 동일한 주소의 클래스 변수를 참조한다는 의미이다.</p>
<p>해당 개념을 확인해 보기 위해 주로 사용되는 코드는 아래와 같다.</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">StaticSample</span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> val <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">StaticSample</span> sam1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StaticSample</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                sam1<span class="token punctuation">.</span>val<span class="token operator">++</span><span class="token punctuation">;</span>

                <span class="token class-name">StaticSample</span> sam2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StaticSample</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                sam2<span class="token punctuation">.</span>val<span class="token operator">++</span><span class="token punctuation">;</span>

                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sam1<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sam2<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>해당 개념으로부터 확인 할 수 있는 static의 명확한 장점은</p>
<p><strong>중복되는 변수, 객체의 메모리 할당을 방지할 수 있다</strong></p>
<p>는 점이다.</p>
<p>이로 인한 메모리 관점의 이점 외에도 기능적인 이유로도 사용되기도 한다.</p>
<p>만약 여러 클래스에서 공통적으로 사용 될 수도 있는이 아니라, 공통으로 사용해야만 하는 데이터 들에 대해 (eg. 사용자 session 등)<br>
구현 할 때도 고려된다.</p>
<p>해당 기능을 구현하기 위한 패턴이 <strong>Singleton pattern</strong>이다.</p>
<blockquote>
<p>클래스 내부의 static 변수의 사용이 아닌, static class 즉, 여러 객체를 찍어 낼 수 없게 구현하기 위해서는 아래와 같이 생성자를 private 으로 접근 제어 후 내부 get… 를 통해 유일한 static 객체를 사용되게 만들 수 있다.</p>
</blockquote>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> st<span class="token punctuation">;</span>

	<span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SingletonGetInstatnce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">return</span> st<span class="token punctuation">;</span> 
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>	</code></pre></div>
<blockquote>
<p>static method 는</p>
<ol>
<li>객체를 생성하여 호출할 필요가 없이, 클래스 명을 통해 호출이 가능하다.     ( eg. <code class="language-text">Singleton.SingletonGetInstatnce()</code>)</li>
<li>같은 클래스를 통해 생성된 객체들 간 같은 메서드를 참조하는 것을 보장하기 위해 사용 (Override 가 불가능 한 이유이다.)</li>
</ol>
</blockquote>
<h2>왜 주의해야 할까</h2>
<hr>
<p>위에서 언급된 개념을 통해 얻어진 이점이 그대로 주의점이 되어 돌아올 수 있다.</p>
<p>언급된 개념을 다시 살펴보자</p>
<blockquote>
<p>클래스에서 static 으로 선언한 변수는 찍어낸 객체 주소에 존재하는 변수가 아닌, 클래스 주소에 위치 한 클래스 변수이다.
이 말인즉슨, 해당 클래스의 생성자로 찍어낸 모든 객체가  동일한 주소의 클래스 변수를 참조한다는 의미이다.</p>
</blockquote>
<h3>1. 유일한 변수를 쳐다본다. 그 유일한 변수가 수정이 일어나게 되면?</h3>
<p>위의  StaticSample 예제 코드에서도 확인이 가능했듯이 찍어낸 모든 객체가,<br>
<strong>class 메모리 주소에 존재</strong>하는 유일한 static 변수를 참조하기 때문에,</p>
<p><em>어디서 수정이 되었든 모든 찍어진 객체에서  사용되는 static 변수의 값이 수정된다.</em></p>
<p>당연히 이를 위해서 static 변수를 사용한 것이겠지만, 명확한 의도를 이해하고, 또 이해 가능하게 작성해야 한다.</p>
<p>잘못 사용된 좋은 예제가 있어 인용하였다.</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BadQueryManager</span> <span class="token punctuation">{</span>
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> queryURL <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token class-name">BadQueryManager</span><span class="token punctuation">(</span><span class="token class-name">String</span> badUrl<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		queryURL <span class="token operator">=</span> badUrl<span class="token punctuation">;</span> 
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">getSql</span><span class="token punctuation">(</span><span class="token class-name">String</span> idSql<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
			reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>queryURL<span class="token punctuation">)</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>해당 코드가 야기하는 문제는 무엇일까.</p>
<p>여러 Thread 에서 해당 static url 변수를 사용하기 위해서, 해당 객체를 <code class="language-text">생성자(queryURL)</code> 을 통해 찍어 getSql 메서드를 을 사용하게 되면<br>
생성자 로직에 의해 BadQueryManager 의 static String queryURL 이 변경 되게 되므로 시점에 따라</p>
<p><strong>다른 Thread 에서는 영문도 모른 채 바뀐 queryURL</strong> 을 통해 getSql 로직 결과를 반환 받게 되는 것 이다.</p>
<p>따라서 명확한 의도를 가지고 사용해야 하는 것이 static 이다.</p>
<p>위의 경우에서도 언제나 변한 없는 값을 위한 URL 을 원하는 경우</p>
<ol>
<li><code class="language-text">static final</code> 을 통해 값의 할당이 최초에만 될 수 있게 하거나, (적어도 값의 변경을 시도 할 때 에러라도 내서 수정 할 수 있게…)</li>
<li><code class="language-text">private BadQueryManager{ ... }</code> 를 통해 생성자를 막아버려 싱글톤으로 구현</li>
</ol>
<p>할 수도  있을 것 같다.</p>
<p>좌우지간 관습적으로 이럴 경우 이렇게… 식으로의 코드 작성 보다 해당 기능이 원하는 명확한 요구 사항을 파악한 후에
올바른 코드 작성을 해야 하는 것 같다</p>
<br>
<p>위의 문제는 동일 JVM에서도 발생할 수 있는 경우이다.<br>
하지만, MSA 를 통해 여러 대의 WAS 생성하여 수평 확장을 통해 성능개선 하는 것이 대두되는 요즘 또 다른 문제점이 발생한다.</p>
<p>당연하겠지만,</p>
<ul>
<li>다른 JVM 에서는 static 이라 하더라도 각 JVM 별로 load 시점에 따라 다른 주소나 다른 값을 참조한다.</li>
</ul>
<p>이의 주의점은 JVM이 로드 되는 시점이 상이한 환경에서<br>
로드되는 시점 한번에 읽어드려 static 변수로 관리하고자 하였던, 데이터의 값들이<br>
시점, 각 JVM 에서 이루어진 static data 수정으로 인해, JVM 별 static 변수 data 값이 다를 수도 있다는 점이다.</p>
<p>이를 해결하기 위해서</p>
<ul>
<li>static 변수의 값이 수정 될 경우 모든 서버를 재시작하는 등</li>
</ul>
<p>을 고려할 수 있지만, 딱 봐도 무시무시한 방법이기에 JVM 간의 static 한 변수, 데이터를 사용하기 위해서<br>
<strong>캐시 서버</strong>를 통해 확장성 있는 설계를 구성할 수 있다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/9974a4bfa9c09de714f8534014cc1eec/d057b/static_cache.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 101.5625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwT/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB6qIjVUZwGoP/xAAaEAEBAAIDAAAAAAAAAAAAAAABABARITFB/9oACAEBAAEFAmHccTl79L//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAUEAEAAAAAAAAAAAAAAAAAAAAw/9oACAEBAAY/Ah//xAAbEAEAAwEAAwAAAAAAAAAAAAABABEhMVFhcf/aAAgBAQABPyHwtZ0HJhV39j9wdYbBYlZ1hAyf/9oADAMBAAIAAwAAABBr8L//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EB//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAcEAEBAQADAAMAAAAAAAAAAAABEQAhMUFRYXH/2gAIAQEAAT8QKXsHlxc5rriZ9p9u2ZshuQZWMh8ZAo38dY1I+PeeV4SXKICtZ67/2Q=='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/9974a4bfa9c09de714f8534014cc1eec/a59e9/static_cache.webp 192w,
/static/9974a4bfa9c09de714f8534014cc1eec/0ca9f/static_cache.webp 384w,
/static/9974a4bfa9c09de714f8534014cc1eec/dc9b9/static_cache.webp 768w,
/static/9974a4bfa9c09de714f8534014cc1eec/e2c2f/static_cache.webp 1152w,
/static/9974a4bfa9c09de714f8534014cc1eec/f3efb/static_cache.webp 1536w,
/static/9974a4bfa9c09de714f8534014cc1eec/0b2ca/static_cache.webp 2598w"
              sizes="(max-width: 768px) 100vw, 768px"
              type="image/webp"
            />
          <source
            srcset="/static/9974a4bfa9c09de714f8534014cc1eec/150b2/static_cache.jpg 192w,
/static/9974a4bfa9c09de714f8534014cc1eec/6985d/static_cache.jpg 384w,
/static/9974a4bfa9c09de714f8534014cc1eec/19de6/static_cache.jpg 768w,
/static/9974a4bfa9c09de714f8534014cc1eec/4472f/static_cache.jpg 1152w,
/static/9974a4bfa9c09de714f8534014cc1eec/d58d1/static_cache.jpg 1536w,
/static/9974a4bfa9c09de714f8534014cc1eec/d057b/static_cache.jpg 2598w"
            sizes="(max-width: 768px) 100vw, 768px"
            type="image/jpeg"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/9974a4bfa9c09de714f8534014cc1eec/19de6/static_cache.jpg"
            alt="Image"
            title="image"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span>
<em>대규모 시스템 설계 기초</em></p>
<h3>3. GC에서 제외된다.</h3>
<p>static으로 선언 시 GC에서 제외된다는 것은, GC 가 관리해 주지 않는다는 것이고</p>
<p>이는 곧 잘 못 관리 시 Memory Leak 가 발생한다는 것이다.</p>
<p>따라서 static 변수가 메모리에서 차지하는 공간을 불확실하게 둘 수 있는 자료구조를 사용하는 것을 주의해야 한다.<br>
그렇기에 HashMap, ArrayList 와 같이 선언 시 길이를 할당하지 않는 Collection 객체를 static 으로 선언하면
OutOfMemoryError 를 뱉어내며, 서버가 죽게 된다.</p>
<p>따라서 반대로 모니터링 시 계속해서 GC 이후의 최저 메모리 사용량이 증가하게 되면 해당 문제를 의심해 볼 수도 있다.</p>
<br>
<p><em>번외</em></p>
<p>위의 주의점 들을 고려할 때, 얻어 갈 수 있는 관점은<br>
테스트 시 단일 사용자, 단일 WAS에서 발생하는 트래픽만을 고려하는 것이 아닌</p>
<ul>
<li>MSA 구조를 통해, 여러 대 올라가는 WAS</li>
<li>당연하겠지만, 다수의 Client 에서 발생하는 접근</li>
</ul>
<p>을 고려하여 테스트해봐야 한다.</p>
<blockquote>
<p>reference</p>
<ul>
<li><a href="https://product.kyobobook.co.kr/detail/S000001032977" target="_blank" rel="nofollow">자바 성능 튜닝 이야기 - static 제대로 한번 써보자</a></li>
<li><a href="https://product.kyobobook.co.kr/detail/S000001033116" target="_blank" rel="nofollow">가상 면접 사례로 배우는 대규모 시스템 설계 기초</a></li>
</ul>
</blockquote>
<blockquote>
<p>부족한 글 읽어주셔서 진심으로 감사드리며, 잘못된 부분이나 개선점은 무심하게 라도 알려주시면 너무 감사하겠습니다.</p>
</blockquote></div><style data-emotion="css 124boz7">.css-124boz7{padding:120px 0;}@media (max-width: 768px){.css-124boz7{padding:0 20px;}}</style><div class="css-124boz7 e1gqsjds0"></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/static 과 Thread/";window.___webpackCompilationHash="4b40cb3441a14967e735";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-c9fa82aa5b1f9c65f078.js"],"app":["/app-d793487d2519541d78a1.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-c60ccaac012592267949.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-84053ab5c15c6e7b5729.js"],"component---src-templates-post-template-tsx":["/component---src-templates-post-template-tsx-f9f9aa1088516efccdd4.js"]};/*]]>*/</script><script src="/polyfill-c9fa82aa5b1f9c65f078.js" nomodule=""></script><script src="/app-d793487d2519541d78a1.js" async=""></script><script src="/framework-c45ea1cbb39153ed5c73.js" async=""></script><script src="/webpack-runtime-0ebabd170e12628f3d25.js" async=""></script></body></html>